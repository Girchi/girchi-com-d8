version: 2
jobs:
  build:
    docker:
      - image: wodby/php
    steps:
      - checkout
      - run:
          name: update & upgrade
          command: |
            sudo apt-get update 
            sudo apt-get upgrade
      - run: 
          name: install php extentions
          command: |
            sudo apt-get install php7.*-gd
            sudo apt-get install php7.*-intl
            sudo apt-get install php7.*-xsl
      - run:
          name: install dependencies
          command: |
            composer install
      - run:
          name: install drupal coder
          command: | 
            composer global require drupal/coder	 
      - run:
          name: make phpcs global
          command: | 
            export PATH="$PATH:$HOME/.composer/vendor/bin"
      - run:   
          name: register drupal standart
          command: |
            phpcs --config-set installed_paths ~/.composer/vendor/drupal/coder/coder_sniffer
      - run:
          name: check installed standarts
          command: |
            phpcs -i
